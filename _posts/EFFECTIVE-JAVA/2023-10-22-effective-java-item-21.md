---
title: "[Item21] - μΈν„°νμ΄μ¤λ” κµ¬ν„ν•λ” μ½μ„ μƒκ°ν•΄ μ„¤κ³„ν•λΌ."
last_modified_at: 2023-10-22T21:00:37-21:30
categories: EFFECTIVE-JAVA
tags:
  - Effective Java
  - Java
  - Study
toc: true
toc_sticky: true
toc_label: "Effective Java"
toc_icon: "file"
---

Effective Java 3/Eλ¥Ό κ³µλ¶€ν•λ©° μ‘μ„±ν• κΈ€μ…λ‹λ‹¤.<br>
νΌμ κ³µλ¶€ν•κ³  μ •λ¦¬ν• λ‚΄μ©μ΄λ©°, ν‹€λ¦° λ¶€λ¶„μ€ μ§€μ ν•΄μ£Όμ‹λ©΄ κ°μ‚¬λ“λ¦¬κ² μµλ‹λ‹¤ π€
{: .notice--info}

`Java8`μ—μ„ λ¶€ν„° κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— `default` λ©”μ†λ“λ¥Ό μ¶”κ°€ν•  μ μκ² λμ—λ‹¤.
μ΄ λ©”μ†λ“λ¥Ό μ„ μ–Έν•λ©΄, κ·Έ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν›„ λ””ν΄νΈ λ©”μ†λ“λ¥Ό μ¬μ •μν•μ§€ μ•μ€ λ¨λ“  ν΄λμ¤μ—μ„ λ””ν΄νΈ κµ¬ν„μ΄ μ“°μ΄κ² λλ‹¤.

## λ””ν΄νΈ λ©”μ†λ“

```java
public interface Calculator {
    int sum(int num1, int num2);
    int minus(int num1, int num2);

    default int multiple(int num1, int num2) {
        return num1 * num2;
    }
}
```

```java
public class EngineeringCalc implements Calculator {
    @Override
    public int sum(int num1, int num2) {
        return num1 + num2;
    }

    @Override
    public int minus(int num1, int num2) {
        return num1 - num2;
    }
}
```

μ„μ™€ κ°™μ΄ `Calculator`λ¥Ό `implements`ν•μ—¬ `sum`κ³Ό `muinus`λ§ κµ¬ν„ν•΄μ£Όκ³ , `multiple`μ€ μΈν„°νμ΄μ¤μ κΈ°λ¥λ€λ΅ λ”°λΌκ°€λ„λ΅ λ‘μ—λ‹¤.

```java
public class CalcTest {

    @Test
    void calcTest() {
        EngineeringCalc ec = new EngineeringCalc();
        SoftAssertions.assertSoftly(softAssertions -> {
            softAssertions.assertThat(ec.minus(10, 20)).isEqualTo(-10);
            softAssertions.assertThat(ec.sum(10, 20)).isEqualTo(30);
            softAssertions.assertThat(ec.multiple(10, 20)).isEqualTo(200);
        });
    }
}
```

κ·Έ κ²°κ³Ό μ§μ ‘ κµ¬ν„ν• `minus`, `sum`λ„ μ •μƒμ μΌλ΅ λ™μ‘ν•λ©°, `multiple` λν• μ •μƒμ μΌλ΅ μ‘λ™ν•λ” κ²ƒμ„ μ• μ μλ‹¤.

μ΄λ ‡κ² κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— μƒλ΅μ΄ λ©”μ†λ“λ¥Ό μ•μ •μ μΌλ΅ μ¶”κ°€ν•  μ μμ§€λ§, λ¨λ“  κµ¬ν„μ²΄λ“¤κ³Ό λ§¤λ„λ½κ² λ™μ‘ν•λ‹¤λ” λ³΄μ¥μ€ μ—†λ‹¤.
**ν„μ¬μ μΈν„°νμ΄μ¤μ— μƒλ΅μ΄ λ©”μ†λ“κ°€ μ¶”κ°€λ  μΌμ€ μμ›ν μ—†λ‹¤.** κ³  κ°€μ •ν•κ³  μ‘μ„±λμΌλ‹ λ§μ΄λ‹¤.

> μƒκ°ν•  μ μλ” λ¨λ“  μƒν™©μ—μ„ λ¶λ³€μ‹μ„ ν•΄μΉμ§€ μ•λ” λ””ν΄νΈ λ©”μ†λ“λ¥Ό μ‘μ„±ν•κΈ°λ€ μ–΄λ ¤μ΄ λ²•μ΄λ‹¤.

`Java8`μ—μ„ μ¶”κ°€λ `Collection.removeIf()` λ©”μ†λ“λ¥Ό λ΄λ³΄μ.

```java
public interface Collection {
    default boolean removeIf(Predicate<? super E> filter) {
        Objects.requireNonNull(filter);
        boolean result = false;
        for(Iterator<E> it = iterator(); it.hasNext();) {
            if(filter.test(it.next())) {
                it.remove();
                result = true;
            }
        }
        return result;
    }
}
```

`Iterator`λ¥Ό λλ©΄μ„ μ£Όμ–΄μ§„ `Predicate`κ°€ `true`λ¥Ό λ°ν™ν•λ©΄ λ°λ³µμμ `remove` λ©”μ†λ“λ¥Ό νΈμ¶ν•΄ κ·Έ μ›μ†λ¥Ό μ κ±°ν•λ‹¤.
Java8 `Collection`μ— μ¶”κ°€λ `removeIf`λ” ν„μ΅΄ν•λ” λ¨λ“  `Collection` κµ¬ν„μ²΄μ™€ μ μ–΄μ°λ¬μ§€λ” κ²ƒμ€ μ•„λ‹λ‹¤.

μ•„νμΉμ `SynchronizedColletion` ν΄λμ¤λ” λ¨λ“  λ©”μ†λ“μ—μ„ μ£Όμ–΄μ§„ λ½ κ°μ²΄λ΅ λ™κΈ°ν™”ν• ν›„ λ‚΄λ¶€ μ»¬λ ‰μ… κ°μ²΄μ— κΈ°λ¥μ„ μ„μ„ν•λ” λνΌ ν΄λμ¤μ΄λ‹¤.
μ§€κΈλ„ ν™λ°ν κ΄€λ¦¬λκ³  μμ§€λ§, `removeIf` λ©”μ†λ“λ¥Ό μ¬μ •μν•κ³  μμ§€ μ•λ‹¤.
μ¦‰, λ¨λ“  λ©”μ†λ“ νΈμ¶μ„ μ•μ•„μ„ λ™κΈ°ν™”ν•΄μ£Όμ§€ λ»ν•λ‹¤.
`removeIf`μ κµ¬ν„μ€ λ™κΈ°ν™”μ— κ΄€ν•΄ μ•„λ¬΄κ²ƒλ„ λ¨λ¥΄λ―€λ΅ λ½ κ°μ²΄λ¥Ό μ‚¬μ©ν•  μ μ—†λ‹¤.

`SynchronizedColletion` μΈμ¤ν„΄μ¤λ¥Ό μ—¬λ¬ μ¤λ λ“κ°€ κ³µμ ν•λ” ν™κ²½μ—μ„ ν• μ¤λ λ“κ°€ `removeIf`λ¥Ό νΈμ¶ν•λ©΄,
`ConcurrentModificationException`μ΄ λ°μƒν•κ±°λ‚ λ‹¤λ¥Έ μκΈ°μΉ λ»ν• κ²°κ³Όλ΅ μ΄μ–΄μ§ μ μλ‹¤.

## μ£Όμμ‚¬ν•­

> **κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— λ””ν΄νΈ λ©”μ†λ“λ΅ μƒ λ©”μ†λ“λ¥Ό μ¶”κ°€ν•λ” μΌμ€ κΌ­ ν•„μ”ν• κ²½μ°κ°€ μ•„λ‹λ©΄ ν”Όν•΄μ•Όν•λ‹¤.**

μ¶”κ°€ν•λ ¤λ” λ””ν΄νΈ λ©”μ†λ“κ°€ κΈ°μ΅΄ κµ¬ν„μ²΄λ“¤κ³Ό μ¶©λν•μ§€λ” μ•μ„μ§€ μ‹¬μ‚¬μ™κ³ ν•΄μ•Ό ν•λ‹¤.
λ°λ©΄, μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό λ§λ“λ” κ²½μ°λΌλ©΄ ν‘μ¤€μ μΈ λ©”μ†λ“ κµ¬ν„μ„ μ κ³µν•λ”λ° μ•„μ£Ό μ μ©ν• μλ‹¨μ΄λ©°,
κ·Έ μΈν„°νμ΄μ¤λ¥Ό λ” μ‰½κ² κµ¬ν„ν•΄ ν™μ©ν•  μ μκ²λ” ν•΄μ¤€λ‹¤.

> **μΈν„°νμ΄μ¤λ΅λ¶€ν„° λ©”μ†λ“λ¥Ό μ κ±°ν•κ±°λ‚ κΈ°μ΅΄ λ©”μ†λ“μ μ‹κ·Έλ‹μ²λ¥Ό μμ •ν•λ” μ©λ„κ°€ μ•„λ‹λ‹¤.**

μ΄λ° ν•νƒλ΅ μΈν„°νμ΄μ¤λ¥Ό λ³€κ²½ν•λ©΄ λ°λ“μ‹ κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ§κ°€λ¨λ¦¬κ² λλ‹¤.

> **μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•  λ•λ” μ—¬μ „ν μ„Έμ‹¬ν• μ£Όμλ¥Ό κΈ°μΈμ—¬μ•Ό ν•λ‹¤.**

λ””ν΄νΈ λ©”μ†λ“λ΅ κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— μƒλ΅μ΄ λ©”μ†λ“λ¥Ό μ¶”κ°€ν•λ©΄ μ»¤λ‹¤λ€ μ„ν—λ„ λ”Έλ ¤μ¨λ‹¤.

> **μƒλ΅μ΄ μΈν„°νμ΄μ¤λΌλ©΄ λ¦΄λ¦¬μ¦ μ „μ— λ°λ“μ‹ ν…μ¤νΈλ¥Ό κ±°μ³μ•Ό ν•λ‹¤.**

μƒ μΈν„°νμ΄μ¤κ°€ μλ„ν• μ©λ„μ— μ λ¶€ν•©ν•λ”μ§€ ν™•μΈν•λ” κΈΈμ€ ν—λ‚ν•μ§€λ§, λ°”λ΅μ΅μ„ κΈ°νκ°€ μ•„μ§ λ‚¨μ•μ„ λ• κ²°ν•¨μ„ μ°Ύμ•„λ‚΄λ” κ²ƒμ΄ μΆ‹λ‹¤.
**μΈν„°νμ΄μ¤λ¥Ό λ¦΄λ¦¬μ¦ν• ν›„λΌλ„ κ²°ν•¨μ„ μμ •ν•λ” κ² κ°€λ¥ν• κ²½μ°λ„ μκ² μ§€λ§, μ λ€ κ·Έ κ°€λ¥μ„±μ— κΈ°λ€μ„λ” μ• λλ‹¤.**