---
title: "[AWS] - Spring Boot í”„ë¡œì íŠ¸ ë°°í¬(1)"
last_modified_at: 2023-02-16T21:00:37-21:30
categories: AWS
tags:
  - SpringBoot
  - AWS EC2
  - AWS RDS
  - AWS CodeDeploy
  - AWS S3
toc: true
toc_sticky: true
toc_label: "Spring CI/CD"
toc_icon: "file"
---
## ê°œë°œ í™˜ê²½

ğŸ’» OS : M1 Mac Ventura 13.1

ğŸƒ Spring : Spring Boot 2.7.7

ğŸ› ï¸ Java : Amazon corretto 17

ğŸ“¦ Stack : AWS : S3, CodeDeploy, EC2(Amazon Linux), RDS

> í•´ë‹¹ ê¸€ì€ ê°œë°œ ê³¼ì •ì„ ê¸°ë¡í•˜ê¸° ìœ„í•œ ê¸€ì…ë‹ˆë‹¤.<br>
> í•„ìš”í•œ ë¶€ë¶„ì€ ë³¸ì¸ì˜ ê°œë°œ í™˜ê²½ ë° ìƒí™©ì— ë§ê²Œ ë°”ê¿”ì„œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

## CI/CD Flow

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-02-16 á„‹á…©á„’á…® 11 56 12](https://user-images.githubusercontent.com/82663161/219400565-595097ea-3d05-408a-be21-b9fcb6b7af3e.png)

1ï¸âƒ£ : ë°°í¬ ë¸Œëœì¹˜ì— Push ë  ë•Œ, Github Actions ì‹¤í–‰

2ï¸âƒ£ : Actionsë¥¼ í†µí•´ ë¹Œë“œí•œ í›„ AWS IAM ì¸ì¦ì„ ê±°ì¹œ ë’¤, ì „ì²´ íŒŒì¼ì„ .zip íŒŒì¼ë¡œ ë¬¶ì–´ S3ì— ì—…ë¡œë“œ

3ï¸âƒ£ : S3ì— ì˜¬ë¼ê°„ íŒŒì¼ëª…ì„ í† ëŒ€ë¡œ CodeDeployì— ë°°í¬ ìš”ì²­

4ï¸âƒ£ : ë°°í¬ ìš”ì²­ì„ ë°›ìœ¼ë©´ S3ì—ì„œ íŒŒì¼ì„ ë°›ì•„ì™€ EC2ì— ë°°í¬

5ï¸âƒ£ : deploy.shë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

## CI í™˜ê²½ êµ¬ì¶•

ì„¤ëª…í•˜ê¸° ì•ì„œ application*.yml(properties) íŒŒì¼ë“¤ì€ ëª¨ë‘ `.gitignore`ì— ë“±ë¡ëœ ìƒíƒœì…ë‹ˆë‹¤.<br>
ë˜í•œ í•˜ë‚˜ì˜ `actions.yml` íŒŒì¼ì„ ê°€ì§€ê³  ìƒí™©ì— ë§ê²Œ ì§€ì†ì ìœ¼ë¡œ ë‚´ìš©ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ëª…í•  ì˜ˆì •ì´ë©°, ìµœì¢…ë³¸ì€ ê°€ì¥ ë§ˆì§€ë§‰ì— ì¶”ê°€í•´ë†“ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!
{: .notice--warning}

### Properties íŒŒì¼ ë“±ë¡

ìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒê³¼ ê°™ì´ ì„¤ì • íŒŒì¼ë“¤ì€ `.gitignore`ì— ë“±ë¡ë˜ì–´ ìˆì–´ `master` ë¸Œëœì¹˜ì— ì˜¬ë¼ê°€ìˆì§€ ì•Šì€ ìƒíƒœë‹¤.

ë•Œë¬¸ì— buildë¥¼ í•˜ëŠ” ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë‚  ìˆ˜ ìˆê³ , ìµœì¢…ì ìœ¼ë¡œ ë°°í¬ ë˜ì—ˆì„ ë•Œ ì‹¤í–‰ì¡°ì°¨ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, 
ì„¤ì • íŒŒì¼ì„ Actions Secretì— ì¶”ê°€í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219413884-41d20e19-e31d-43e1-abec-fc6ccfb6c876.png)

ìœ„ ì‚¬ì§„ê³¼ ê°™ì´ í´ë¦­í•˜ë©´ ìƒˆë¡œìš´ secretì„ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.

Name : CI/CDë¥¼ ìœ„í•´ ì‚¬ìš©í•  `actions.yml`ì—ì„œ ì‚¬ìš©í•  ì´ë¦„(ëŒ€ë¬¸ì ì‚¬ìš©)<br>
Secret : Nameì— ëŒ€í•œ ìƒì„¸ ë‚´ìš© ì‘ì„±

<img width="791" alt="image" src="https://user-images.githubusercontent.com/82663161/219415639-5a369bb0-6c02-45b7-840a-e615bd791ada.png">

í•„ìëŠ” `application.yml`ì— êµ¬ë™ì— í•„ìš”í•œ í•„ìˆ˜ í•­ëª©ì„ ì‘ì„±í•˜ê³ , 
`application-prod.yml`ì—ëŠ” ë°°í¬ í™˜ê²½ì— í•„ìš”í•œ RDS ì •ë³´ì™€ ê°™ì€ ê²ƒì„ ì‘ì„±í•´ë†“ì€ ìƒíƒœê¸° ë•Œë¬¸ì— ë”°ë¡œ êµ¬ë¶„í–ˆë‹¤.(+ ì¶”í›„ ê°œë°œ ì„œë²„ë„ ë„ìš°ê¸° ìœ„í•¨)

```bash
# Actions Secrets
PROPERTIES_MAIN_PROD : appication.yml
PROPERTIES_PROD : application-prod.yml
```

### GitHub Actions

<img width="1130" alt="image" src="https://user-images.githubusercontent.com/82663161/219407229-8aa989f3-8326-40a5-bfd3-a270a7ef8ce6.png">

ë°°í¬ë¥¼ í•˜ê³ ìí•˜ëŠ” Github Repositoryì˜ Actionsì— ë“¤ì–´ê°€ `actions.yml`ì„ ì‘ì„±í•´ì¤€ë‹¤.

```yaml
# Actionsì—ì„œ ë³´ì—¬ì§ˆ workflow ì´ë¦„
name: CI/CD

# íŠ¸ë¦¬ê±° ì§€ì •
# master ë¸Œëœì¹˜ì— pushê°€ ì¼ì–´ë‚  ë•Œ ì‹¤í–‰
on:
  push:
    branches:
      - master

jobs:
  CI-CD:
    runs-on: ubuntu-latest
    steps:

      ## Setting JDK
      ## ë³¸ì¸ spring ë²„ì „ì— ë§ëŠ” ë²„ì „ ì§€ì •
      ## https://github.com/actions/setup-java
      - uses: actions/checkout@v3
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'

      ## Gradle Caching
      - name: Gradle Caching
        uses: actions/cache@v3
        with:
          path: |
            ~/.gradle/caches
            ~/.gradle/wrapper
          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
          restore-keys: |
            ${{ runner.os }}-gradle-

      ## Create application.yml
      - name: make prod application.yml
        if: contains(github.ref, 'master')
        run: |
          cd ./src/main/resources
          touch ./application.yml
          echo "${{ secrets.PROPERTIES_MAIN_PROD }}" > ./application.yml
        shell: bash

      ## Create application-prod.yml
      - name: make prod application-prod.yml
        if: contains(github.ref, 'master')
        run: |
          cd ./src/main/resources
          touch ./application-prod.yml
          echo "${{ secrets.PROPERTIES_PROD }}" > ./application-prod.yml
        shell: bash

      - name: Grant execute permission for gradlew
        run: chmod +x ./gradlew
        shell: bash

      ## Gradle Build
      - name: Build with Gradle
        run: ./gradlew build
```

ì‘ì„±ì„ ë‹¤ ì‘ì„±í•œ ë’¤ì— Start Commitì„ í†µí•´ `master` ë¸Œëœì¹˜ì— ë°”ë¡œ push í•´ì¤€ë‹¤.

ì´ ê³¼ì •ì—ì„œ ìƒê¸°ëŠ” ì˜¤ë¥˜ë“¤ì€ ë¯¸ë¦¬ í•´ê²°í•´ ë†“ëŠ”ê²Œ ë§˜ í¸í•˜ë‹¤!

#### ë³€ê²½í•  ì‚¬í•­ ì •ë¦¬

- Setting JDK
    - ë³¸ì¸ Spring ë²„ì „ì— ë§ë„ë¡ ì§€ì •
- Create *.yml
    - properties íŒŒì¼ì€ ì™¸ë¶€ì— ê³µê°œí•˜ë©´ ì•ˆ ë˜ëŠ” ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤.
    - ë•Œë¬¸ì— Setting - Secretes - Actionsì—ì„œ ì¶”ê°€í•´ì¤€ë‹¤.
    - í•„ìš”ì— ë”°ë¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì§€ì›Œì£¼ê³ , ymlì´ ì•„ë‹ˆë©´ propertiesë¡œ ë°”ê¿”ì£¼ë©´ ëœë‹¤.

#### ì˜¤ë¥˜ ì •ë¦¬

##### Build With Gradle

```bash
Run ./gradlew build
  ./gradlew build
  shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
  env:
    JAVA_HOME: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/11.0.18-10/x64
    JAVA_HOME_11_X64: /opt/hostedtoolcache/Java_Temurin-Hotspot_jdk/11.0.18-10/x64
Error: Could not find or load main class org.gradle.wrapper.GradleWrapperMain
Caused by: java.lang.ClassNotFoundException: org.gradle.wrapper.GradleWrapperMain
```

- Project ìë°” ë²„ì „ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •í–ˆëŠ”ì§€ í™•ì¸

```bash
/home/runner/work/.../src/main/java/com/.../app/config/security/CustomAuthenticationFailureHandler 2.java:
13: error: class CustomAuthenticationFailureHandler is public, should be declared in a file named CustomAuthenticationFailureHandler.java
```

- í”„ë¡œì íŠ¸ì— `ClassName 2.java`ê³¼ ê°™ì´ ë‹¤ë¥¸ í´ë˜ìŠ¤ íŒŒì¼ê³¼ ì¤‘ë³µë˜ëŠ” íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸

```bash
* What went wrong:
Execution failed for task ':test'.
> There were failing tests. See the report at: 
```

- ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ê°€ ì¡´ì¬í•  ê²½ìš° ìœ„ì™€ ê°™ì´ ëœ° ìˆ˜ ìˆìŒ
- í˜¹ì€ íŠ¹ì • `Test`ì—ì„œ ì‚¬ìš©ë˜ëŠ” íŠ¹ì • íŒŒì¼, `Properties`ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ì„ ê²½ìš° ë°œìƒ ê°€ëŠ¥

## AWS

### IAM

AWSëŠ” ì„œë¹„ìŠ¤ì˜ ë³´ì•ˆì„ ìœ„í•´ ì™¸ë¶€ ì ‘ê·¼ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì°¨ë‹¨í•œë‹¤. ë•Œë¬¸ì— IAM(Identify & Access Management)ì„ ì´ìš©í•´ì„œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë£¨íŠ¸ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219425311-532673c3-5368-49b1-9dc9-6579dbc0be84.png)

ìƒë‹¨ ê²€ìƒ‰ì°½ì„ í†µí•´ `IAM`ì— ë“¤ì–´ê°€ **ì‚¬ìš©ì** íƒ­ì˜ **ì‚¬ìš©ì ì¶”ê°€**ë¥¼ ëˆŒëŸ¬ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219426289-07ac89aa-a3b7-462a-8abf-1ceb1b30de01.png)

![image](https://user-images.githubusercontent.com/82663161/219426874-ff05c818-fbbc-4de6-bba2-bc3bf8bcb805.png)

`AWSCodeDeployFullAccess`, `AmazonS3FullAccess` 2ê°€ì§€ ì •ì±…ì„ ì—°ê²°í•´ì¤€ë‹¤.

ë‹¤ë¥¸ ê²ƒì€ ê±´ë“¤ì´ì§€ ì•Šê³  ë‹¤ìŒì„ ëˆ„ë¥¸ ë’¤, ì‚¬ìš©ìë¥¼ ìƒì„±í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219428418-c87f458d-5006-4b43-a9e4-8af37800fccc.png)

ì´ IAMì„ ê°€ì§€ê³  GitHubì—ì„œ ì¦ëª…ì„ í•´ì¤˜ì•¼í•˜ê¸° ë•Œë¬¸ì— `Access Key`ë¥¼ ë°œê¸‰ ë°›ì•„ì•¼ í•œë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219429332-d70ed3b4-43be-4771-bcda-27896556e6a3.png)

![image](https://user-images.githubusercontent.com/82663161/219431076-7fd44a27-3e3c-46ac-a04b-479b1cbad4b9.png)

ì„¤ëª…ì€ ì„ íƒì´ê¸° ë•Œë¬¸ì— ê±´ë“¤ì´ì§€ ì•Šê³  ì§„í–‰

![image](https://user-images.githubusercontent.com/82663161/219431506-f6f2b1f9-6d9f-47c0-9d0c-b3231f6fa4a9.png)

`Access Key`, `Secret Key`ëŠ” ë”°ë¡œ ë©”ëª¨ë¥¼ í•´ë†“ê³ , `.csv` íŒŒì¼ì€ ë‹¤ìš´ì„ ë°›ì•„ë†“ì!

#### Secret ë“±ë¡

ê¹Œë¨¹ê¸° ì „ì— ìœ„ì—ì„œ ë°œê¸‰ ë°›ì€ í‚¤ë¥¼ GitHub Secretsì— ë“±ë¡í•˜ì!

<img width="790" alt="image" src="https://user-images.githubusercontent.com/82663161/219433397-c6ac6ebc-543d-4b67-b5fd-9b2575f94db1.png">

```bash
# Actions Secrets
AWS_IAM_ACCESS_KEY : ì•¡ì„¸ìŠ¤ í‚¤
AWS_IAM_SECRET_KEY : ë¹„ë°€ ì•¡ì„¸ìŠ¤ í‚¤
```

#### ì—­í•  ì¶”ê°€

IAMì„ ê°€ì§€ê³  S3, CodeDeploy, EC2ì— ì ‘ê·¼ì„ í•  ê²ƒì´ê¸° ë•Œë¬¸ì— ê° ì„œë¹„ìŠ¤ì— ëŒ€í•´ ì—­í• ì„ ì¶”ê°€í•´ì¤€ë‹¤.

##### EC2 Role

EC2ì—ì„œëŠ” S3ì— ìˆëŠ” íŒŒì¼ì„ ë°›ì•„ì™€ì•¼í•˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ë“±ë¡í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219439960-10c83247-af0e-46f6-8172-9bfe2b1b16d6.png)

![image](https://user-images.githubusercontent.com/82663161/219440336-297f8cfd-9a3d-4817-a881-0e0c77cde6bc.png)

![image](https://user-images.githubusercontent.com/82663161/219440588-e415580d-dd13-49df-8523-83a17281f69d.png)

`AmazonEC2RoleforAWSCodeDeploy` ê²€ìƒ‰ í›„ ì²´í¬ 

![image](https://user-images.githubusercontent.com/82663161/219443200-af387e48-309c-4101-9ca6-79c710d4f445.png)

ì´ ì™¸ ë‚´ìš©ì€ ëª¨ë‘ ê·¸ëŒ€ë¡œ ë‘ê³  ì—­í• ì„ ë§Œë“ ë‹¤.

##### CodeDeploy Role

CodeDeployì—ì„œëŠ” S3ì— ìˆëŠ” ê²ƒì„ EC2ì— ë³´ë‚¸ ë’¤, ë°°í¬ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ë“±ë¡í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219443890-2104af98-fb72-4ecd-95e8-1aef4305ff44.png)

![image](https://user-images.githubusercontent.com/82663161/219444260-2d502d4b-9272-4efc-b070-dcf606cbf8f4.png)

CodeDeployì˜ ì •ì±…ì€ 1ê°€ì§€ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ê·¸ëŒ€ë¡œ ë‹¤ìŒì„ ëˆŒëŸ¬ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219444509-31e05f1c-7eac-4371-be9b-f69f13575a3e.png)

ë™ì¼í•˜ê²Œ ì´ë¦„ì„ ì˜ ì§€ì–´ì£¼ê³  ì—­í• ì„ ë§Œë“ ë‹¤.

### S3

CI ê³¼ì •ì„ í†µí•´ ë¹Œë“œëœ íŒŒì¼ë“¤ì„ ì €ì¥í•  S3 Bucketì„ ìƒì„±í•´ì¤€ë‹¤.

#### S3 Bucket ìƒì„±

![image](https://user-images.githubusercontent.com/82663161/219434490-d3cdae8a-bc83-4c6c-9292-28ec71a7571a.png)

![image](https://user-images.githubusercontent.com/82663161/219434965-d8db70c9-1951-4b18-89fa-3873d70fa78e.png)

![image](https://user-images.githubusercontent.com/82663161/219435139-f19b3262-6050-4848-a67e-365a998deff7.png)

ì´ ì™¸ì˜ ì„¤ì •ì€ ê±´ë“¤ì´ì§€ ì•Šê³  ë²„í‚· ë§Œë“¤ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ë©´ ë!

### EC2

ë’¤ì—ì„œ ì„¤ì •í•  CodeDeployì—ì„œ íŒŒì¼ì„ ë°›ì•„ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì—­í• 

#### EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

![image](https://user-images.githubusercontent.com/82663161/219446249-d76d29dc-22f6-4c3d-818b-2f212c53037f.png)

![image](https://user-images.githubusercontent.com/82663161/219446988-ab20edfe-5085-42e1-a6e8-a40f9194e24e.png)

![image](https://user-images.githubusercontent.com/82663161/219447298-f581bf3c-cea8-4770-bd57-63e5f707b80b.png)

![image](https://user-images.githubusercontent.com/82663161/219447613-a4753a35-34e5-4473-99ad-4fcbb71ba809.png){ .center}

ìƒˆ í‚¤í˜ì–´ë¥¼ ìƒì„±í•˜ë©´, ec2-keypair.pem íŒŒì¼ì„ ë‹¤ìš´ë°›ê²Œ ëœë‹¤. ë‹¤ìš´ë¡œë“œí•œ íŒŒì¼ì„ ë°”íƒ•í™”ë©´ì— aws í´ë”ë¥¼ ë§Œë“¤ì–´ ë³´ê´€í•´ë†“ì!

í´ë” ì´ë¦„ì´ë‚˜ ê²½ë¡œëŠ” ë³¸ì¸ì´ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ë°”ê¿”ë„ ëœë‹¤! ë‹¨, `ec2-keypair.pem` íŒŒì¼ì— ëŒ€í•œ ì´ë¦„ ìˆ˜ì •ì€ í•˜ë©´ ì•ˆ ëœë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219448388-656d7f47-7ab7-4817-9daa-24bc7763c85a.png)

ê¸°ì¡´ ìœ„ì¹˜ ë¬´ê´€ì—ì„œ ë‚´ IPë¡œ ë³€ê²½!

![image](https://user-images.githubusercontent.com/82663161/219448576-0efb9a7a-aae7-4277-869d-53d406e31660.png)

í”„ë¦¬í‹°ì–´ ê¸°ì¤€ 30ê¸°ê°€ê¹Œì§€ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— 30ê¸°ê°€ë¥¼ ì‚¬ìš©í•˜ê³ , ë‹¤ë¥¸ ì˜µì…˜ì€ ì•„ë¬´ê²ƒë„ ê±´ë“¤ì§€ ë§ì<br>
gp2 ê°™ì€ ê²½ìš° ë²”ìš©ì´ ì•„ë‹Œ ê²ƒì„ ì‚¬ìš©í•  ê²½ìš° ê³¼ê¸ˆì´ ë°œìƒí•  ìˆ˜ ìˆìŒ!

ë‹¤ë¥¸ ë¬¸ì œê°€ ì—†ë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘ì„ ëˆŒëŸ¬ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹œì‘í•´ì£¼ì

#### IAM ì—­í•  ë¶€ì—¬

![image](https://user-images.githubusercontent.com/82663161/219455481-a7725f0a-8c5d-4bca-8334-acd55def877a.png)

ìƒˆë¡œ ë§Œë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìš°í´ë¦­í•˜ì—¬ ë³´ì•ˆ - IAM ì—­í•  ìˆ˜ì •ì„ í´ë¦­í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219456236-1cbcdf6e-70b4-4504-9aa2-c04d9eafb8eb.png)

ì•ì„œ ë§Œë“¤ì—ˆë˜ EC2ì˜ IAM ì—­í• ì„ ì ìš©í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219456546-f92d07b1-e9db-48a0-a0fa-0134e67fc640.png){ .center}

ì—­í• ì„ ì¬ì ìš©í•˜ê¸° ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ `ì¬ë¶€íŒ…`í•´ì¤€ë‹¤. ì¬ë¶€íŒ… ê³¼ì •ì€ 1 ~ 3ë¶„ ì •ë„ ì†Œìš”ë˜ë‹ˆ ë‹¤ìŒ ê³¼ì •ì„ ì²œì²œíˆ ì§„í–‰í•˜ì!

#### íƒ„ë ¥ì  IP ì ìš©

ì¸ìŠ¤í„´ìŠ¤ê°€ ì¬ë¶€íŒ…ë  ë•Œë§ˆë‹¤ í¼ë¸”ë¦­ ì£¼ì†ŒëŠ” ê³„ì†í•´ì„œ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì— íƒ„ë ¥ì  IP ì£¼ì†Œë¥¼ í†µí•´ ê³ ì • í¼ë¸”ë¦­ IPë¥¼ ìƒì„±í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219449542-83e0fcfd-496e-46be-a8ca-dbc36e3c91c0.png)

![image](https://user-images.githubusercontent.com/82663161/219449962-4328785d-dbaf-4b42-957f-7f88432f992d.png)

ì•„ë¬´ê²ƒë„ ê±´ë“¤ì´ì§€ ì•Šê³  í• ë‹¹ì„ í´ë¦­í•´ ë¶€ì—¬í•´ì¤€ë‹¤!

![image](https://user-images.githubusercontent.com/82663161/219450452-95b9aad2-a581-4124-8d08-3301eb780a43.png)

![image](https://user-images.githubusercontent.com/82663161/219451088-7f190e9e-b6a4-4932-adf6-3dee87e74845.png)

ì•ì„œ ë§Œë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ê³ , í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ í”„ë¼ì´ë¹— IPë¥¼ ì„ íƒí•œ ë’¤, ì—°ê²° ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤€ë‹¤.

#### ssh ì ‘ì†

ì´ì œ ì •ìƒì ìœ¼ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì¡ŒëŠ”ì§€ í™•ì¸í•´ë³´ì!

![image](https://user-images.githubusercontent.com/82663161/219451973-5a67f9d8-eef5-4122-ad0f-2ee9bd36b379.png)

ì¸ìŠ¤í„´ìŠ¤ ìƒì„¸ í˜ì´ì§€ì—ì„œ ìš°ì¸¡ ìƒë‹¨ì— ìˆëŠ” ì—°ê²° ë²„íŠ¼ì„ í´ë¦­í•˜ê³ , SSH í´ë¼ì´ì–¸íŠ¸ í…ì— ê°€ì¥ ì•„ë˜ ì˜ˆì‹œ ssh ì—°ê²° ì£¼ì†Œë¥¼ ë³µì‚¬í•´ í„°ë¯¸ë„ì— ì…ë ¥í•´ì£¼ì!

> í•´ë‹¹ ê³¼ì •ì€ `.pem`ì´ ìˆëŠ” ë””ë ‰í„°ë¦¬ì—ì„œ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219454754-6d2f61ac-2644-4342-b56a-f28d6420ed4f.png)

#### CodeDeploy ì„¤ì¹˜

S3ì— ì˜¬ë¼ê°„ íŒŒì¼ì„ CodeDeployë¥¼ í†µí•´ EC2ì— ì „ë‹¬í•´ ë°°í¬ë¥¼ í•´ì£¼ê¸° ë•Œë¬¸ì— sshì— ì—°ê²°ëœ ìƒíƒœì—ì„œ ì„¤ì¹˜ë¥¼ í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219458276-5c5dff21-1379-41e6-a191-d42eaa8621c7.png)

```bash
# CodeDeploy ì„¤ì¹˜
aws s3 cp s3://aws-codedeploy-ap-northeast-2/latest/install . --region ap-northeast-2
# ì„¤ì¹˜ íŒŒì¼ì— ê¶Œí•œ ë¶€ì—¬
chmod +x ./install
# ë‹¤ìš´ ë°›ì€ íŒŒì¼ì„ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ ruby ì„¤ì¹˜
sudo yum install ruby;
# CodeDeploy ì„¤ì¹˜
sudo ./install auto
# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
sudo service codedeploy-agent status
```

### CodeDeploy

`S3`ì— ì˜¬ë¼ì˜¨ `.zip` íŒŒì¼ì„ EC2ì— ë°°í¬í•˜ëŠ” ì—­í• 

#### ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±

![image](https://user-images.githubusercontent.com/82663161/219459360-03a626ae-dda6-47a7-8775-31ad61862757.png)

![image](https://user-images.githubusercontent.com/82663161/219459715-7afef3b1-5a2b-4654-bf80-36b2985f4ca4.png)

ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ì€ ë‚˜ì¤‘ì— `actions.yml`ì— ë“¤ì–´ê°€ë‹ˆ ë‹¤ë¥¸ ì´ë¦„ê³¼ í—·ê°ˆë¦¬ì§€ ì•Šê²Œ ì§€ì–´ì¤€ë‹¤!

#### ë°°í¬ ê·¸ë£¹ ìƒì„±

![image](https://user-images.githubusercontent.com/82663161/219459923-cf59a33a-1e9f-4cbe-9b1a-77e08296d3c5.png)

![image](https://user-images.githubusercontent.com/82663161/219460332-7928916d-8b15-479c-948c-240558cc406a.png)

ë°°í¬ ê·¸ë£¹ ì´ë¦„ì€ ë§ˆìŒëŒ€ë¡œ ì§€ì–´ì£¼ê³ , ì„œë¹„ìŠ¤ ì—­í• ì€ IAMì—ì„œ ë§Œë“¤ì–´ë†¨ë˜ `codedeploy-role`ì„ ì ìš©í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219460858-ba2b7652-0936-4855-a1ef-c4a39c9ac532.png)

ìœ„ ê³¼ì •ì—ì„œ ë§Œë“  EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—°ê²°í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219461074-cc3b7629-db21-4440-b5fc-c84ebaec27e8.png)

ë§ˆì§€ë§‰ìœ¼ë¡œ `CodeDeployDefault.AllAtOnce`ë¡œ ì„¤ì • ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ë¡œë“œ ë°¸ëŸ°ì„œëŠ” ë¹„í™œì„±í™” í•´ì¤€ë‹¤.

### RDS

![image](https://user-images.githubusercontent.com/82663161/219468681-f51b647c-a882-4d86-81ee-20248fe57fa4.png)

![image](https://user-images.githubusercontent.com/82663161/219468832-f77ddc19-4b2b-4799-9052-288c391b9b34.png)

![image](https://user-images.githubusercontent.com/82663161/219468925-2ceabd1b-2d18-4c0a-916e-b59aa5c54308.png)

ì—”ì§„ ë²„ì „ì€ í˜„ì¬ Spring Bootì—ì„œ ì‚¬ìš© ì¤‘ì¸ ì—”ì§„ ë²„ì „ê³¼ ë™ì¼í•˜ê²Œ ë§ì¶°ì•¼ í•œë‹¤!

![image](https://user-images.githubusercontent.com/82663161/219469278-45f11968-5a6b-475d-8e31-7e9c6f72c37f.png)

![image](https://user-images.githubusercontent.com/82663161/219469438-77efd238-ff7f-4686-870b-96fe8af5c523.png)

DB ì¸ìŠ¤í„´ìŠ¤ ì‹ë³„ìëŠ” hostì™€ ê´€ë ¨ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì ë‹¹íˆ ì˜ ì§€ì–´ì£¼ê³ , ë§ˆìŠ¤í„° ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§ì ‘ ì§€ì •í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219469762-7752116f-560f-4bb0-bf3e-261b2b2b0391.png)

ìŠ¤í† ë¦¬ì§€ ìë™ ì¡°ì •ì„ í™œì„±í™”í•˜ë©´ ê³¼ê¸ˆì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¹„í™œì„±í™” í•´ì¤€ë‹¤!

![image](https://user-images.githubusercontent.com/82663161/219470444-5ebee5c4-ea92-4668-9749-c95205480ef6.png)

EC2ì—ì„œ ë“¤ì–´ê°€ëŠ” ìš”ì²­ë§Œ í—ˆìš©í•˜ê¸° ìœ„í•´ EC2 ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ì— ì—°ê²°ì„ ì„ íƒí•´ì£¼ê³ , ì•ì„œ ìƒì„±í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒí•´ì¤€ë‹¤. VPCëŠ” Defaultë¡œ ë‘ë©´ ëœë‹¤!

![image](https://user-images.githubusercontent.com/82663161/219471219-cff2ed89-f49c-4fd1-ac31-f8c0d111fb36.png)

ë‚˜ì¤‘ì— ë¡œì»¬ì—ì„œ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë„ë¡ ê·œì¹™ì„ ë„£ì„ ê²ƒì´ê¸° ë•Œë¬¸ì— ìƒˆë¡œìš´ vpc ë³´ì•ˆ ê·¸ë£¹ì„ ìƒì„±í•´ì¤€ë‹¤.

![image](https://user-images.githubusercontent.com/82663161/219471832-d0825e50-e636-4946-8e3d-7e65c530dbd9.png)

ìë™ ë°±ì—…ì„ ë¹„í™œì„±í™” ì‹œì¼œì£¼ê³ , ì´ˆê¸° DBë¥¼ ìƒì„±í•˜ë ¤ë©´ ì´ë¦„ì„ ì‘ì„±í•´ì£¼ê³ , í•„ìš”ì—†ë‹¤ë©´ ë¹ˆ ì¹¸ìœ¼ë¡œ ëƒ…ë‘ì!

![image](https://user-images.githubusercontent.com/82663161/219472001-45ccfda7-6b12-4e1c-9f54-c280da3ea5ba.png)

ë²„ì „ì´ ìë™ìœ¼ë¡œ ì˜¬ë¼ê°€ë©´, Spring Bootì—ì„œë„ ë³€ê²½ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ê³ ì • ë²„ì „ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¹„í™œì„±í™” í•´ì£¼ì!

ì´ ìƒíƒœë¡œ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±í•˜ë©´ ë!

#### ê·œì¹™ ì •ì˜

![image](https://user-images.githubusercontent.com/82663161/219473905-084ba677-56d0-4bd3-b618-dc102c333888.png)

![image](https://user-images.githubusercontent.com/82663161/219474462-55406e05-8c6b-4ec1-8f2e-9fc0442f3edb.png)

ìƒì„±ëœ DBì— ë“¤ì–´ê°€ì„œ ì—°ê²° & ë³´ì•ˆ íƒ­ ì•„ë˜ì— ë³´ì•ˆê·¸ë£¹ ê·œì¹™ì—ì„œ ìœ í˜•ì´ CIDR/IP Inboundì¸ ê²ƒì„ í´ë¦­í•´ì„œ ë“¤ì–´ê°€ì!

![image](https://user-images.githubusercontent.com/82663161/219474662-a7473559-4812-48e6-b92d-9ecde3b7414a.png)

ê¸°ì¡´ì— ë“±ë¡ë˜ì–´ ìˆë˜ `MYSQL/Aurora`ë¥¼ **ëª¨ë“  íŠ¸ë˜í”½**ìœ¼ë¡œ ë³€ê²½ í›„ ê·œì¹™ ì €ì¥!

#### VPC ì„¸íŒ…

![image](https://user-images.githubusercontent.com/82663161/219478710-cd7985f4-cedf-463d-a79d-24117f12b9c7.png)

ìƒë‹¨ ê²€ìƒ‰ì°½ì— VPCë¥¼ ê²€ìƒ‰í•œ ë’¤, ë¼ìš°íŒ… í…Œì´ë¸” íƒ­ì— ë“¤ì–´ê°€ë³´ì. ë³´í†µ RDS-Pvt-rtë¡œ ëœ í…Œì´ë¸”ì´ 1ê°œë§Œ ì¡´ì¬í•  ê²ƒì´ë‹¤. (í•„ìëŠ” RDS 2ê°œë¥¼ ë„ì›Œë†”ì„œ 2ê°œì„)

í•´ë‹¹ í…Œì´ë¸” IDë¥¼ í´ë¦­í•´ ìƒì„¸ í˜ì´ì§€ë¡œ ë“¤ì–´ê°„ ë‹¤ìŒ ë¼ìš°íŒ… í¸ì§‘ì„ ëˆŒëŸ¬ì£¼ì

![image](https://user-images.githubusercontent.com/82663161/219479420-8a9470fc-ac84-47c3-9f43-009e0dcc411b.png)

localì€ ê·¸ëŒ€ë¡œ ëƒ…ë‘ê³ , ë¼ìš°íŒ… ì¶”ê°€ë¥¼ ëˆŒëŸ¬ ì‚¬ì§„ê³¼ ê°™ì´ ë§ì¶°ì£¼ë©´ igw-012345678 ì´ëŸ° ì½”ë“œê°€ ìƒì„±ë  ê²ƒì´ë‹¤. ì´ ìƒíƒœë¡œ ë³€ê²½ì‚¬í•­ ì €ì¥!

#### DB ì—°ë™

![image](https://user-images.githubusercontent.com/82663161/219475979-a954642d-d4ec-446e-a702-58c3b70ca775.png){ .center}

ë‹¤ì‹œ RDSë¡œ ëŒì•„ì™€ì„œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë³µì‚¬í•´ì„œ DB ì—°ê²°ì„ í•´ë³´ì!

## CD í™˜ê²½ êµ¬ì¶•

ì•ì„œ CI ê³¼ì •ì€ actions.ymlì— ë“±ë¡ë˜ì–´ ìˆìœ¼ë‹ˆ êµ¬ì¶•í•œ ë‚´ìš©ì„ í† ëŒ€ë¡œ CD ê³¼ì •ì„ ì¶”ê°€í•˜ì!

### GitHub Actions

```yaml
# Actionsì—ì„œ ë³´ì—¬ì§ˆ workflow ì´ë¦„
name: CI/CD

# íŠ¸ë¦¬ê±° ì§€ì •
# master ë¸Œëœì¹˜ì— pushê°€ ì¼ì–´ë‚  ë•Œ ì‹¤í–‰
on:
  push:
    branches:
      - master

# env
env:
  S3_BUCKET_NAME: deploy-bucket
  PROJECT_NAME: project

jobs:
  CI-CD:
    runs-on: ubuntu-latest
    steps:

      ## Setting JDK
      ## ë³¸ì¸ spring ë²„ì „ì— ë§ëŠ” ë²„ì „ ì§€ì •
      ## https://github.com/actions/setup-java
      - uses: actions/checkout@v3
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'

      ## Gradle Caching
      - name: Gradle Caching
        uses: actions/cache@v3
        with:
          path: |
            ~/.gradle/caches
            ~/.gradle/wrapper
          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
          restore-keys: |
            ${{ runner.os }}-gradle-

      ## Create application.yml
      - name: make prod application.yml
        if: contains(github.ref, 'master')
        run: |
          cd ./src/main/resources
          touch ./application.yml
          echo "${{ secrets.PROPERTIES_MAIN_PROD }}" > ./application.yml
        shell: bash

      ## Create application-prod.yml
      - name: make prod application-prod.yml
        if: contains(github.ref, 'master')
        run: |
          cd ./src/main/resources
          touch ./application-prod.yml
          echo "${{ secrets.PROPERTIES_PROD }}" > ./application-prod.yml
        shell: bash

      - name: Grant execute permission for gradlew
        run: chmod +x ./gradlew
        shell: bash

      ## Gradle Build
      - name: Build with Gradle
        run: ./gradlew build

      - name: Make zip file
        run: zip -r ./$GITHUB_SHA.zip .
        shell: bash

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v1
        with:
          aws-access-key-id: ${{ secrets.AWS_IAM_ACCESS_KEY }}
          aws-secret-access-key: ${{ secrets.AWS_IAM_SECRET_KEY }}
          aws-region: ap-northeast-2

      # script files ë³µì‚¬
      - name: Copy script
        run: cp ./scripts/*.sh ./deploy
      
      # S3ì— ì—…ë¡œë“œ
      - name: Upload to S3
        run: aws s3 cp --region ap-northeast-2 ./$GITHUB_SHA.zip s3://$S3_BUCKET_NAME/$PROJECT_NAME/$GITHUB_SHA.zip

      # Deploy
      - name: Deploy
        run: |
          aws deploy create-deployment \
          --application-name deploy-dev-app \
          --deployment-config-name CodeDeployDefault.AllAtOnce \
          --deployment-group-name deploy-dev \
          --file-exists-behavior OVERWRITE \
          --s3-location bucket=deploy-bucket,bundleType=zip,key=project/$GITHUB_SHA.zip \
          --region ap-northeast-2 \
```

#### ë³€ê²½í•  ì‚¬í•­ ì •ë¦¬

- env
    - S3_BUCKET_NAME : S3 ë²„í‚· ì´ë¦„
    - PROJECT_NAME : S3 ë²„í‚· ë‚´ë¶€ì— ë¹Œë“œëœ íŒŒì¼ì„ ì €ì¥í•  í´ë”(í”„ë¡œì íŠ¸) ì´ë¦„
- Deploy
    - application-name : CodeDeployì˜ application ì´ë¦„
    - deployment-group-name : í•´ë‹¹ applicationì˜ ë°°í¬ ê·¸ë£¹ ì´ë¦„ 
    - s3-location 
      - bucket : S3 ë²„í‚· ì´ë¦„
      - key : envì— ìˆëŠ” PROJECT_NAMEì˜ valueì™€ ë™ì¼í•˜ê²Œ ì‘ì„±

### deploy.sh ìƒì„±

CodeDeployë¥¼ í†µí•´ S3ì—ì„œ EC2ë¡œ ë³´ë‚´ëŠ” ê³¼ì •ì—ì„œ ë°°í¬ë¥¼ ìš”ì²­í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì‘ì„±í•´ì¤€ë‹¤.

> SpringBoot í”„ë¡œì íŠ¸ ìµœìƒìœ„ì— scripts ë””ë ‰í„°ë¦¬ë¥¼ ë§Œë“  ë’¤, ì•„ë˜ ë‚´ìš©ì˜ ì£¼ì„ì€ ì§€ìš°ê³  ì‘ì„±

<center>
    <img width="209" alt="image" src="https://user-images.githubusercontent.com/82663161/219465579-234d99f6-2140-4d6a-b2e0-3fc2e3e6028b.png">
</center>

```shell
#!/bin/bash
BUILD_JAR=$(ls /home/ec2-user/action/build/libs/*.jar)
JAR_NAME=$(basename $BUILD_JAR)
echo "> build íŒŒì¼ëª…: $JAR_NAME" >> /home/ec2-user/action/deploy.log

echo "> build íŒŒì¼ ë³µì‚¬" >> /home/ec2-user/action/deploy.log
DEPLOY_PATH=/home/ec2-user/action/
cp $BUILD_JAR $DEPLOY_PATH

echo "> í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ pid í™•ì¸" >> /home/ec2-user/action/deploy.log
CURRENT_PID=$(pgrep -f $JAR_NAME)

if [ -z $CURRENT_PID ]
then
  echo "> í˜„ì¬ êµ¬ë™ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì—†ìœ¼ë¯€ë¡œ ì¢…ë£Œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> /home/ec2-user/action/deploy.log
else
  echo "> kill -15 $CURRENT_PID"
  kill -15 $CURRENT_PID
  sleep 5
fi

DEPLOY_JAR=$DEPLOY_PATH$JAR_NAME
echo "> DEPLOY_JAR ë°°í¬"    >> /home/ec2-user/action/deploy.log
nohup java -jar $DEPLOY_JAR >> /home/ec2-user/deploy.log 2>/home/ec2-user/action/deploy_err.log &
```

### appspec.yml ìƒì„±

<center>
    <img width="203" alt="image" src="https://user-images.githubusercontent.com/82663161/219466218-a4adfebf-7680-4942-b273-5abf96597428.png">
</center>

í•´ë‹¹ íŒŒì¼ì€ í”„ë¡œì íŠ¸ êµ¬ì¡° ìµœìƒìœ„ì— ë”°ë¡œ ë§Œë“¤ì–´ ì¤€ë‹¤.

ìµœì¢…ì ìœ¼ë¡œ CodeDeployê°€ EC2 í™˜ê²½ì— S3ì—ì„œ ê°€ì ¸ì˜¨ jar íŒŒì¼ì„ ë°°í¬í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì£¼ëŠ” íŒŒì¼

```shell
version: 0.0
os: linux
# S3ì— ìˆëŠ” zip íŒŒì¼ì´ EC2ì— ë°°í¬ë  ìœ„ì¹˜ë¥¼ ì§€ì •
files:
  # CodeDeployì—ì„œ ì „ë‹¬í•´ ì¤€ íŒŒì¼ ì¤‘ destinationìœ¼ë¡œ ì´ë™ì‹œí‚¬ ëŒ€ìƒì„ ë£¨íŠ¸ë¡œ ì§€ì •(ì „ì²´íŒŒì¼)
  - source: /
    # sourceì—ì„œ ì§€ì •ëœ íŒŒì¼ì„ ë°›ì„ ìœ„ì¹˜, ì´í›„ jarë¥¼ ì‹¤í–‰í•˜ëŠ” ë“±ì€ destinationì—ì„œ ì˜®ê¸´ íŒŒì¼ë“¤ë¡œ ì§„í–‰
    destination: /home/ec2-user/action/ 
    overwrite: yes

# CodeDeployì—ì„œ EC2ì„œë²„ë¡œ ë„˜ê²¨ì¤€ íŒŒì¼ë“¤ì„ ëª¨ë‘ ec2-userê¶Œí•œì„ ê°–ë„ë¡ í•©ë‹ˆë‹¤.
permissions: 
  - object: /
    pattern: "**"
    owner: ec2-user
    group: ec2-user

# ApplicationStart ë‹¨ê³„ì—ì„œ deploy.shë¥¼ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í•©ë‹ˆë‹¤.
# CodeDeployë°°í¬ ë‹¨ê³„ì—ì„œ ì‹¤í–‰í•  ëª…ë ¹ì–´ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
hooks:
  # deploy.shë¥¼ ec2-userê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.
  ApplicationStart: 
    - location: scripts/deploy.sh
      # ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ 60ì´ˆ ì´ìƒ ìˆ˜í–‰ë˜ë©´ ì‹¤íŒ¨ê°€ ë©ë‹ˆë‹¤.
      timeout: 60 
      runas: ec2-user
```

## ë ˆí¼ëŸ°ìŠ¤
[Github Actions Variable](https://docs.github.com/en/actions/learn-github-actions/variables)<br>
[ë±€ê·¤ë‹˜ ë¸”ë¡œê·¸](https://bcp0109.tistory.com/356)<br>
[ì£¼í˜•ë‹˜ ë¸”ë¡œê·¸](https://dkswnkk.tistory.com/674)<br>
[ê¹€ì¬ì„±ë‹˜ ë¸”ë¡œê·¸](https://aamoos.tistory.com/453)<br>
[danurië‹˜ ë¸”ë¡œê·¸](https://gksdudrb922.tistory.com/240?category=1028532)<br>
[zzang9haë‹˜ ë¸”ë¡œê·¸](https://zzang9ha.tistory.com/404)
